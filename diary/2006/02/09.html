<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <base href=".">
    <title>侍ズム - 2006/02/09</title>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://yusuke.homeip.net/diary/../../../diary/rss.xml"/>
    <link rel="alternate" type="application/rdf+xml" title="RDF" href="http://yusuke.homeip.net/diary/../../../diary/rdf.xml"/>
    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://yusuke.homeip.net/diary/../../../diary/atom.xml"/>
        <link rel="stylesheet" href="../../../diary/themes/custom/theme.css" type="text/css"/>
    <script src="../../../maps_file_api_v_1_key_ABQIAAAAtS2fi_RnBiuUs4BlVHjt6BRABsBgP8wqQh7kS3FgnXJL7vMCZhRCUVBp4cfEBxevDEQRKjj9DJC-Yg.js" type="text/javascript" charset="UTF-8"></script>
  <link rel="stylesheet" href="../../../diary/themes/custom/lightbox/lightbox.css" type="text/css">
  <script type="text/javascript" src="../../../diary/themes/custom/lightbox/spica.js"></script>
<script type="text/javascript" src="../../../diary/themes/custom/lightbox/lightbox_plus.js"></script>
    <script type="text/javascript" src="../../../diary/pebble.js">
    </script>
  </head>
  <body>
    <div class="bodyContent">
<div class="header">
  <div class="search">
    <form method="post" action="../../../diary/search.html" accept-charset="UTF-8">
    <table cellpadding="4" cellspacing="0">
      <tr>
        <td align="right">
          <a href="../../../diary/today.html">今日</a> |
          <a href="../../../diary/rss.xml">RSS</a> |
          <a href="../../../diary/rdf.xml">RDF</a> |
          <a href="../../../diary/atom.xml">Atom</a> |
          <a href="../../../diary/viewFeeds.html">その他</a>
        </td>
      </tr>
      <tr>
        <td valign="top" align="right">
          <input type="text" name="query"/>&nbsp;<input type="submit" value="検索"/>
        </td>
      </tr>
      <tr>
        <td align="right" valign="top">
          <a href="../../../diary/search.html">詳細な検索</a>
        </td>
      </tr>
    </table>
    </form>
  </div>
  <div class="blogName">
    <a href="../../../diary.html">侍ズム</a>
  </div>
  <div class="blogDescription">
    MacとJavaとアーチェリーと
  </div>
  <br/>
    <div id="categories">
    <a href="../../../diary/tags.html">タグ</a>
     - 
      カテゴリー :
          <span class="selectedCategory">All</span>
        |
            <span class="category"><a href="../../../diary/categories/Archery.html">アーチェリー</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Car.html">車</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Cooking.html">食べ物</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Fitness.html">Fitness</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Game.html">ゲーム</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Java.html">Java</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Mac.html">Mac</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Misc.html">雑多</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Movie.html">映画</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Photo.html">写真</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Python.html">Python</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Server.html">自宅サーバ</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Travel.html">旅行・散歩</a></span>
        |
            <span class="category"><a href="../../../diary/categories/gps.html">GPS</a></span>
  </div>
</div>
<div style="text-align: center"><br/>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_alternate_color = "FFFFFF";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//--></script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script>
</div>
<div class="sidebar">
  <!-- google_ad_section_start(weight=ignore) -->
<div>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_alternate_ad_url = "../../../160x600.html";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "4188DD";
google_color_text = "4169AA";
google_color_url = "4169AA";
//--></script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script>
<center>
<!-- Start of Flickr Badge -->
<style type="text/css">
.zg_div {margin:0px 5px 5px 0px; width:117px;}
.zg_div_inner {border: solid 1px #000000; background-color:#ffffff;  color:#666666; text-align:center; font-family:arial, helvetica; font-size:11px;}
.zg_div a, .zg_div a:hover, .zg_div a:visited {color:#3993ff; background:inherit !important; text-decoration:none !important;}
</style>
<script type="text/javascript">
zg_insert_badge = function() {
var zg_bg_color = 'ffffff';
var zgi_url = 'http://www.flickr.com/apps/badge/badge_iframe.gne?zg_bg_color='+zg_bg_color+'&zg_person_id=46579916%40N00';
document.write('<iframe style="background-color:#'+zg_bg_color+'; border-color:#'+zg_bg_color+'; border:none;" width="113" height="151" frameborder="0" scrolling="no" src="'+zgi_url+'" title="Flickr Badge"><\/iframe>');
if (document.getElementById) document.write('<div id="zg_whatlink"><a href="http://www.flickr.com/badge.gne"	style="color:#3993ff;" onclick="zg_toggleWhat(); return false;">What is this?<\/a><\/div>');
}
zg_toggleWhat = function() {
document.getElementById('zg_whatdiv').style.display = (document.getElementById('zg_whatdiv').style.display != 'none') ? 'none' : 'block';
document.getElementById('zg_whatlink').style.display = (document.getElementById('zg_whatdiv').style.display != 'none') ? 'none' : 'block';
return false;
}
</script>
<div class="zg_div"><div class="zg_div_inner"><a href="http://www.flickr.com/">www.<strong style="color:#3993ff">flick<span style="color:#ff1c92">r</span></strong>.com</a><br>
<script type="text/javascript">zg_insert_badge();</script>
<div id="zg_whatdiv">This is a Flickr badge showing public photos from <a href="http://www.flickr.com/photos/46579916@N00">Yusuke Yamamoto</a>. Make your own badge <a href="http://www.flickr.com/badge.gne">here</a>.</div>
<script type="text/javascript">if (document.getElementById) document.getElementById('zg_whatdiv').style.display = 'none';</script>
</div>
</div>
<!-- End of Flickr Badge -->
</center>
<!-- SiteSearch Google -->
<!--form method="get" action="http://www.google.com/custom" target="_top">
<table border="0" bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<br/>
<input type="hidden" name="domains" value="yusuke.homeip.net"></input>
<input type="text" name="q" size="15" maxlength="255" value=""></input>
<input type="submit" name="sa" value="検索"></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value=""></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="yusuke.homeip.net" checked="checked"></input>
<font size="-1" color="#000000">yusuke.homeip.net</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-3583922429486444"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="UTF-8"></input>
<input type="hidden" name="oe" value="UTF-8"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1;"></input>
<input type="hidden" name="hl" value="ja"></input>
</td></tr></table>
</form-->
<!-- SiteSearch Google -->
  <br/>
  <br/>
</div>
<!-- google_ad_section_end -->
</div>
<div class="left">
  <div>
    <b>最近のエントリー</b>
    <br/>
      <div class="small">
        <a href="../../../diary/2008/01/08/1199788501883.html" title="http://yusuke.homeip.net/diary/2008/01/08/1199788501883.html">マイクロソフトがノルウェーの検索エンジンベンダ FAST に買収提案</a>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/07/1199709578159.html" title="http://yusuke.homeip.net/diary/2008/01/07/1199709578159.html">ホームシアター建設記 - スピーカーの天吊り</a>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/06/1199630793832.html" title="http://yusuke.homeip.net/diary/2008/01/06/1199630793832.html">ホームシアター建設記 - スピーカー組み上げ、視聴</a>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/06/1199629036693.html" title="http://yusuke.homeip.net/diary/2008/01/06/1199629036693.html">ホームシアター建設記 - スピーカー材料集め</a>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/06/1199627102030.html" title="http://yusuke.homeip.net/diary/2008/01/06/1199627102030.html">ホームシアター建設記 - スピーカー、プロジェクター配線と遮音</a>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/06/1199625970926.html" title="http://yusuke.homeip.net/diary/2008/01/06/1199625970926.html">ホームシアター建設記 - これまでのウチの映画視聴環境</a>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/01/1199121421000.html" title="http://yusuke.homeip.net/diary/2008/01/01/1199121421000.html">手作りおせち</a>
      </div>
  </div>
<br/>
<br/>
  <div>
    <b>最近のレスポンス</b>
    <br/>
      <div class="small">
        <a href="../../../diary/2008/01/08/1199788501883.html#comment1199797151140" title="http://yusuke.homeip.net/diary/2008/01/08/1199788501883.html#comment1199797151140">Re: マイクロソフトがノルウェーの検索エンジンベンダ FAST に買収提案</a>
        <br/>
        追加ニュースです。
http://jp.reuters.co...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/08/1199788501883.html#comment1199795365339" title="http://yusuke.homeip.net/diary/2008/01/08/1199788501883.html#comment1199795365339">Re: マイクロソフトがノルウェーの検索エンジンベンダ FAST に買収提案</a>
        <br/>
        ほっほー。
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/01/1199121421000.html#comment1199621511793" title="http://yusuke.homeip.net/diary/2008/01/01/1199121421000.html#comment1199621511793">Re: 手作りおせち</a>
        <br/>
        これが東京のおせち！、かどうかはわかりま...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../diary/2008/01/01/1199121421000.html#comment1199609743719" title="http://yusuke.homeip.net/diary/2008/01/01/1199121421000.html#comment1199609743719">Re: 手作りおせち</a>
        <br/>
        おおー、うまそう！
地域が違うからか、ウチの実家のものとはだ...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../diary/2007/12/31/1199036515591.html#comment1199370807569" title="http://yusuke.homeip.net/diary/2007/12/31/1199036515591.html#comment1199370807569">Re: INAXのシャワートイレを買いました</a>
        <br/>
        ウンコのライトアップっつうのが正月らしく...
      </div>
  </div>
  <div class="calendar"><table width="100%"><tr><td colspan="7" align="center"><b><a href="../../../diary/2006/02.html">2月 2006</a></b></td></tr><tr><td class="calendarDayHeader" width="14%">日</td><td class="calendarDayHeader" width="14%">月</td><td class="calendarDayHeader" width="14%">火</td><td class="calendarDayHeader" width="14%">水</td><td class="calendarDayHeader" width="14%">木</td><td class="calendarDayHeader" width="14%">金</td><td class="calendarDayHeader" width="14%">土</td></tr><tr><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/01.html">1</a>&nbsp;</td><td class="calendarDay">&nbsp;2&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/03.html">3</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/04.html">4</a>&nbsp;</td></tr><tr><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/05.html">5</a>&nbsp;</td><td class="calendarDay">&nbsp;6&nbsp;</td><td class="calendarDay">&nbsp;7&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/08.html">8</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/09.html">9</a>&nbsp;</td><td class="calendarDay">&nbsp;10&nbsp;</td><td class="calendarDay">&nbsp;11&nbsp;</td></tr><tr><td class="calendarDay">&nbsp;12&nbsp;</td><td class="calendarDay">&nbsp;13&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/14.html">14</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/15.html">15</a>&nbsp;</td><td class="calendarDay">&nbsp;16&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/17.html">17</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/18.html">18</a>&nbsp;</td></tr><tr><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/19.html">19</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/20.html">20</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/21.html">21</a>&nbsp;</td><td class="calendarDay">&nbsp;22&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/23.html">23</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/24.html">24</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/25.html">25</a>&nbsp;</td></tr><tr><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/02/26.html">26</a>&nbsp;</td><td class="calendarDay">&nbsp;27&nbsp;</td><td class="calendarDay">&nbsp;28&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td></tr><tr><td colspan="7" align="center"><a href="../../../diary/2006/01.html">1</a>&nbsp; | &nbsp;<a href="/">今日</a>&nbsp; | &nbsp;<a href="../../../diary/2006/03.html">3</a></td></tr></table></div>
<br/>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_cpa_choice = "CAEaCAMRRli4OpNPUAhQBVC3A1A0UC0";
//-->
</script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script>
<br/>
<br/>
<a href="http://www.beasys.co.jp/service/service/certified_prog.html"><img border="0" src="../../../diary/images/web.gif"/></a>
<br/>
<br/>
<a href="http://b.hatena.ne.jp/entrylist?url=http://yusuke.homeip.net/"><img src="http://b.hatena.ne.jp/bc/http://yusuke.homeip.net/" class="bcounter" alt="はてなブックマーク数" title="はてなブックマーク数"></a>
<br/>
<br/>
<a href="http://awasete.com/show.phtml?u=http%3A%2F%2Fyusuke.homeip.net%2Fdiary%2F"><img src="http://img.awasete.com/image.phtml?u=http%3A%2F%2Fyusuke.homeip.net%2Fdiary%2F" width="160" height="140" alt="あわせて読みたい" border="0"></a>
<br>
<br>
<div style="width:176px;text-align:center"><embed src="../../../flash/twitter_badge.swf" flashvars="color1=10079487&amp;type=user&amp;id=4933401" quality="high" width="176" height="176" name="twitter_badge" align="middle" allowscriptaccess="always" wmode="transparent" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"/><br><a style="font-size: 10px; color: #99CCFF; text-decoration: none" href="http://twitter.com/yusukey">follow yusukey at http://twitter.com</a></div>
<br>
<br>
<!-- nakanohito -->
<script language="Javascript">
<!--
var refer = document.referrer;
document.write("<a href='http://nakanohito.jp/'>");
document.write("<img src='http://nakanohito.jp/an/?u=102598&h=397829&w=160&refer="+escape(parent.document.referrer)+"&url="+escape(parent.document.URL)+"' border='0' width='160' height='160' />");
document.write("</a>");
//-->
</script>
<noscript>
<img src="../../../an/_u_102598_h_397829_w_160.jpg" width="160" height="160" alt="Map" border="0"/>
</noscript>
<!-- nakanohito end -->
</center>
</div>
<div class="content">
<div class="blogEntry approved">
  <div class="blogEntryHeader">
    <span class="blogEntryLinks">
      <a href="../../../diary/2006/02/09/1139476974993.html" title="http://yusuke.homeip.net/diary/2006/02/09/1139476974993.html">固定リンク</a> 
        [<a href="../../../diary/categories/Java.html">Java</a>]
    </span>
    <span class="blogEntryTitle">
    <a href="../../../diary/2006/02/09/1139476974993.html" name="a1139476974993" title="http://yusuke.homeip.net/diary/2006/02/09/1139476974993.html">Javaでサムネイル作成</a>
    </span>
    <br/>
    <span class="blogEntrySubtitle">
    </span>
  </div>
  <div class="blogEntryBody">
<div class="ad_center"><script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 250;
google_ad_height = 250;
google_ad_format = "250x250_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "994400";
google_color_bg = "FFFFFF";
google_color_link = "443300";
google_color_text = "994400";
google_color_url = "994400";
google_ui_features = "rc:10";
//-->
</script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script></div>
            <p><br/>Pebbleの管理画面でサムネイル作成を可能にするため、ちょっと調査してみました。<br/>検証に使ったのは先週携帯で撮った霧のサンフランシスコ。<br/><a href="../../../diary/images/2006/02/original.jpg"><img src="../../../diary/images/2006/02/iphotothumb.jpg"/></a><br/>1600x1200でサイズは380kb。<br/>このサムネイルは iPhoto で作成したもの。<br/><br/>綺麗な縮小画像を作るには<a href="http://java.sun.com/j2se/1.4/ja/docs/ja/api/java/awt/image/AreaAveragingScaleFilter.html">AreaAveragingScaleFilter</a>を使うのがキレイ！って情報がちらほらある。<br/>どうやら内部的にAreaAveragingScaleFilter を使ってくれるっぽい BufferedImage#getScaledInstance() を使って実験。<br/>直接 AreaAveragingScaleFilter を触るよりコード量が少なさそうなので。<br/>(1)コードはこんな感じ<br/><pre class="codeSample">  private static void scaledInstance() throws Exception {<br/>    int height = 240;<br/>    int width = 320;<br/>    FileInputStream fis <br/>       = new FileInputStream("./original.jpg");<br/>    BufferedImage image = ImageIO.read(fis);<br/>    fis.close();<br/>    BufferedImage shrinkImage<br/>      = new BufferedImage(width, height, image.getType());<br/>    shrinkImage.getGraphics()<br/>      .drawImage(image.getScaledInstance(width, height<br/>        , Image.SCALE_AREA_AVERAGING)<br/>        , 0, 0, width, height, null);<br/>    ImageIO.write(shrinkImage, "jpg", new File("./2.jpg"));<br/>  }<br/></pre><br/>・結果はこんな感じ<br/><img src="../../../diary/images/2006/02/scaledInstance.jpg"/><br/>まぁそんなシャギーも目立たないし悪くない感じです。<br/>ただやたら時間がかかります。80秒くらい。<br/>パフォーマンスを求めてMovableTypeから移行したのにこれじゃだめですね。<br/><br/>今度はそのままdrawImageする方法。<br/>(2)コードはこんな感じ<br/><div class="codeSample"><br/>  private static void graphics2dnohints() throws Exception {<br/>    int width = 320;<br/>    int height = 240;<br/>    FileInputStream fis = new FileInputStream("original.jpg");<br/>    BufferedImage image = ImageIO.read(fis);<br/>    fis.close();<br/>    BufferedImage shrinkImage <br/>      = new BufferedImage(width,height, image.getType());<br/>    Graphics2D g2d = shrinkImage.createGraphics();<br/>    g2d.drawImage(image, 0, 0, width, height, null);<br/>    ImageIO.write(shrinkImage, "jpg", new File("graphics2dnohints.jpg"));<br/>  }<br/></div><br/>・結果はこんな感じ<br/><img src="../../../diary/images/2006/02/graphics2dnohints.jpg"/><br/>１秒くらいで完了。かなり早いけどあり得ないくらい汚いです。<br/>単に間引いてるだけですね。<br/><br/>じっとAPIを見つめているとGraphics2D#setRenderingHint() ってメソッドが見えてきました。<br/>なんとなくキレイにしてくれそうなオプションを設定して再挑戦。<br/>(3)コードはこんな感じ<br/><div class="codeSample"><br/>  private static void graphics2d() throws Exception {<br/>    int width = 320;<br/>    int height = 240;<br/>    FileInputStream fis = new FileInputStream("original.jpg");<br/>    BufferedImage image = ImageIO.read(fis);<br/>    fis.close();<br/>    BufferedImage shrinkImage = new BufferedImage(width,height, image.getType());<br/>    Graphics2D g2d = shrinkImage.createGraphics();<br/>    g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION,<br/> RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);<br/>    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,<br/> RenderingHints.VALUE_ANTIALIAS_ON);<br/>    g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING,<br/> RenderingHints.VALUE_COLOR_RENDER_QUALITY);<br/>    g2d.setRenderingHint(RenderingHints.KEY_DITHERING,<br/> RenderingHints.VALUE_DITHER_ENABLE);<br/>    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,<br/> RenderingHints.VALUE_TEXT_ANTIALIAS_ON);<br/>    g2d.setRenderingHint(RenderingHints.KEY_RENDERING,<br/> RenderingHints.VALUE_RENDER_QUALITY);<br/>    g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,<br/> RenderingHints.VALUE_INTERPOLATION_BILINEAR);<br/>    g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS,<br/> RenderingHints.VALUE_FRACTIONALMETRICS_ON);<br/>    g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL,<br/> RenderingHints.VALUE_STROKE_NORMALIZE);<br/>    g2d.drawImage(image, 0, 0, width, height, null);<br/>    ImageIO.write(shrinkImage, "jpg", new File("graphics2d.jpg"));<br/>  }<br/></div><br/>・結果はこんな感じ<br/><img src="../../../diary/images/2006/02/graphics2d.jpg"/><br/>ん、悪くない。むしろ最初の遅いヤツよりキレイなんじゃないの？<br/>しかも早いです。パフォーマンスは体感的にさっきと変わらない感じ。<br/><br/>ではパフォーマンスをざっと検証。<br/>・コードはこんな感じ<br/><div class="codeSample"><br/>  public static void main(String[] args) throws Exception {<br/>    long before;<br/>    double elapsed;<br/>    for (int i = 0; i &lt; 10; i++) {<br/>      //hotspotをVMに教えてあげる<br/>      scaledInstance();<br/>      graphics2dnohints();<br/>      graphics2d();<br/>    }<br/>    before = System.currentTimeMillis();<br/>    System.out.println("getScaledInstance()");<br/>    scaledInstance();<br/>    elapsed = (System.currentTimeMillis() - before) / 1000d;<br/>    System.out.println(elapsed + " secs");<br/><br/>    before = System.currentTimeMillis();<br/>    System.out.println("graphics2dnohints()");<br/>    graphics2dnohints();<br/>    elapsed = (System.currentTimeMillis() - before) / 1000d;<br/>    System.out.println(elapsed + " secs");<br/><br/>    before = System.currentTimeMillis();<br/>    System.out.println("graphics2d()");<br/>    graphics2d();<br/>    elapsed = (System.currentTimeMillis() - before) / 1000d;<br/>    System.out.println(elapsed + " secs");<br/>  }<br/></div><br/>結果はこんな感じ。<br/><div class="codeSample"><br/>getScaledInstance()<br/>72.756 secs<br/>graphics2dnohints()<br/>0.698 secs<br/>graphics2d()<br/>1.463 secs<br/></div><br/>PhotoShop Elements の結果も加えて並べてみた。<br/>
<table>
 <tr>
  <td>
    <img src="../../../diary/images/2006/02/iphotothumb.jpg"/><br>
iPhoto:2秒くらい - 38 KB
  </td>
  <td>
   <img src="../../../diary/images/2006/02/ps-thumb.jpg"/><br>
 PhotoShop Elements2.0(jpeg 最高画質):2秒くらい - 56 KB
  </td>
 </tr>
 <tr>
  <td>
   <img src="../../../diary/images/2006/02/scaledInstance.jpg"/><br>
(1)getScaledInstance(Image.SCALE_AREA_AVERAGING) 72.756 秒 - 11 KB
  </td>
  <td></td>
 </tr>
 <tr>
  <td>
   <img src="../../../diary/images/2006/02/graphics2dnohints.jpg"/><br>
(2)普通にdrawImage()(レンダリングヒントなし):0.698 秒 - 13 KB
  </td>
  <td>
   <img src="../../../diary/images/2006/02/graphics2d.jpg"/><br>
(3)普通にdrawImage()(レンダリングヒント付き):1.463 秒 - 10 KB
  </td>
 </tr>
</table>
<br/>さすがにiPhotoとPhoto Shopはほぼ互角に綺麗。iPhotoはなぜか若干暗い。<br/><br/>Javaで処理する場合どれがいいかなー・・って愚問ですね。<br/>レンダリングヒント付きでdrawImageが一番品質対時間比に優れてます。<br/>Javaで作ったサムネイルはどれも細い線の再現性がイマイチで、iPhoto のサムネイルに比べやや眠たい感じだけど十分実用的。<br/>しかし(1)より(3)の方が綺麗に見える。50倍くらい早く出来上がってるんだけど。<br/>(1)は(3)に比べファイルサイズがやや大きいにも関わらずjpeg的なブロックノイズが目立ちます。<br/></p><div class="tags">タグ : <a href="../../../diary/tags/java.html" rel="tag">java</a></div>
  </div>
  <div class="blogEntryMetadata">
    <span class="floatRight">
        <a href="../../../diary/2006/02/09/1139476974993.html#trackbacks">トラックバック[1]</a>
        <a href="../../../diary/2006/02/09/1139476974993.html#comments">コメント[2]</a>
    </span>
    <form action="../../../diary/modifyBlogEntryDate.html" method="GET">
    投稿者 yusuke : 2006/02/09 18:22:54 JST
</form>
</div>
</div>
<div class="blogEntry approved">
  <div class="blogEntryHeader">
    <span class="blogEntryLinks">
      <a href="../../../diary/2006/02/09/1139470462000.html" title="http://yusuke.homeip.net/diary/2006/02/09/1139470462000.html">固定リンク</a> 
        [<a href="../../../diary/categories/Archery.html">アーチェリー</a>]
        [<a href="../../../diary/categories/Travel.html">旅行・散歩</a>]
    </span>
    <span class="blogEntryTitle">
    <a href="../../../diary/2006/02/09/1139470462000.html" name="a1139470462000" title="http://yusuke.homeip.net/diary/2006/02/09/1139470462000.html">公開練習〜夕飯</a>
    </span>
    <br/>
    <span class="blogEntrySubtitle">
    </span>
  </div>
  <div class="blogEntryBody">
<div class="ad_center"><script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 250;
google_ad_height = 250;
google_ad_format = "250x250_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "994400";
google_color_bg = "FFFFFF";
google_color_link = "443300";
google_color_text = "994400";
google_color_url = "994400";
google_ui_features = "rc:10";
//-->
</script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script></div>
            <p><br/>試合会場はサーカスサーカスホテルからストリップをはさんだちょうど向かい側、リビエラホテルのコンベンションセンター。<br/><a href="../../../diary/2006/01/10.html">エントリーはオンラインで済ませてある</a>ので、受付で名前を言うとルールブックと細かい注意書きのある紙切れを山ほどもらった。<br/><a href="http://www.nfaa-archery.org/tournaments/vegas/schedule.cfm">スケジュールにPractice $5 all day</a>とか書いてあるのでうっすら察していたけれどもやっぱり練習にはお金がかかるらしい。<br/>練習会場の受付でお金を払うと的紙をくれるので、それを空いているマットに貼り付けて練習する仕組み。<br/>17:30くらいだったけど会場はほぼ一杯。<br/>隅の方にようやく空いているマットを見つけ練習開始♪<br/>ほどなく、先ほどのおじさん(Gene Lueck という)がやってきた。<br/>同的で練習しながら色々とコツを教えて貰った。<br/>1. 人のタイミングは気にせず自分のペースでうて<br/>(隣の人がうちおわるのを待ってからセットアップする自分を見て)<br/>日本のインドア大会だと会場の都合から隣の人との距離がメチャメチャ近く、同時にセットアップするのはタブーな場合も。<br/>確かにベガスシュートは大変会場が広いのでそんな心配はないかも。<br/><br/>2. 試合会場には早めについて、上側に的を貼れ<br/>どうやら練習時とおなじく、試合でも自分で的を張るらしい。<br/>で、前半後半でうつ的が上下入れ替わるのだけど、前半上をうって後半下をうつのが楽でしょうと。<br/>なるほどなるほど。<br/><br/><br/>Gene(左)と自分(中)<br/><br/>夕飯もGeneが一緒に食べようということでサーカスサーカスのバッフェへ行った。<br/>メニューは普通だけど一人$10くらい。安い！<br/>Gene の話を聞くと、なんとベガスシュートには初回大会から出場しているとのこと。<br/>アーチェリーは1945年から始めていて、コンパウンドボウは1971年(コンパウンドボウが発明されたか、発売されたあたりらしい)からやっていると！！！<br/>なんか大御所っぽいぞ。有名人なのかなぁ？？<br/>シャツに "The 4th Axis" というナゾのロゴがプリントされていたので突っ込んだら、「コレは俺の発明品だ！」ととくとくと説明を受けた。<br/>フィールドで、打ち上げ、打ち下ろし時にバブルがずれて左右に外すのを防ぐためにサイトエクステンションを傾けるための部品らしい。<br/>効果のほどはわからないけど、バブルのないリカーブボウにはとりあえず関係なさそう。<br/><br/>さて、明日は朝7:30から試合だ！！！<br/>早く寝ないと！<br/></p><div class="tags">タグ : <a href="../../../diary/tags/vegas_shoot.html" rel="tag">vegas shoot</a>, <a href="../../../diary/tags/travel.html" rel="tag">travel</a>, <a href="../../../diary/tags/archery.html" rel="tag">archery</a></div>
  </div>
  <div class="blogEntryMetadata">
    <span class="floatRight">
        <a href="../../../diary/2006/02/09/1139470462000.html#trackbacks">トラックバック[0]</a>
        <a href="../../../diary/2006/02/09/1139470462000.html#comments">コメント[4]</a>
    </span>
    <form action="../../../diary/modifyBlogEntryDate.html" method="GET">
    投稿者 yusuke : 2006/02/09 16:34:22 JST
</form>
</div>
</div>
<div class="blogEntry approved">
  <div class="blogEntryHeader">
    <span class="blogEntryLinks">
      <a href="../../../diary/2006/02/09/1139468429000.html" title="http://yusuke.homeip.net/diary/2006/02/09/1139468429000.html">固定リンク</a> 
        [<a href="../../../diary/categories/Archery.html">アーチェリー</a>]
        [<a href="../../../diary/categories/Travel.html">旅行・散歩</a>]
    </span>
    <span class="blogEntryTitle">
    <a href="../../../diary/2006/02/09/1139468429000.html" name="a1139468429000" title="http://yusuke.homeip.net/diary/2006/02/09/1139468429000.html">Las Vegas 到着</a>
    </span>
    <br/>
    <span class="blogEntrySubtitle">
    </span>
  </div>
  <div class="blogEntryBody">
            <p><br/>さて無事１年ぶりのラスベガスに到着。<br/>空港からはシャトルバスを利用してみた。２人で$10とお手頃。<br/><br/>行き先が試合が開催されるリビエラホテルと、その隣で今回泊まるサーカスサーカスだったので乗客はアーチャーばっか。<br/>カジュアルに話しかけるアメリカ人はどこから来たんだとかどこに泊まるんだとかだれでもかれでもしゃべってる。<br/><br/>われわれに話しかけてきたオッサン(推定63歳)はオレゴン(オーガン、オーガンって聞こえた)から来たらしい。<br/>なんだ君らはベガスシュート初めてか！？とか言って名刺をくれて携帯電話番号を教えてくれた。<br/>なんかわからないことあったらいつでもかけてこい、と。<br/><a href="../../../diary/2005/02/27/1109479387000.html">去年遊びに来たときにサラっと見学した</a>ものの、試合に出場となると右も左もわからないのでちょっと不安だったとこ。これは心強い！<br/><br/>さて、チェックインも無難に済ませたので公開練習会場へいきましょか。<br/></p><div class="tags">タグ : <a href="../../../diary/tags/vegas_shoot.html" rel="tag">vegas shoot</a>, <a href="../../../diary/tags/travel.html" rel="tag">travel</a>, <a href="../../../diary/tags/archery.html" rel="tag">archery</a></div>
  </div>
  <div class="blogEntryMetadata">
    <span class="floatRight">
        <a href="../../../diary/2006/02/09/1139468429000.html#trackbacks">トラックバック[0]</a>
        <a href="../../../diary/2006/02/09/1139468429000.html#comments">コメント[0]</a>
    </span>
    <form action="../../../diary/modifyBlogEntryDate.html" method="GET">
    投稿者 yusuke : 2006/02/09 16:00:29 JST
</form>
</div>
</div>
<div class="blogEntry approved">
  <div class="blogEntryHeader">
    <span class="blogEntryLinks">
      <a href="../../../diary/2006/02/09/1139454156000.html" title="http://yusuke.homeip.net/diary/2006/02/09/1139454156000.html">固定リンク</a> 
        [<a href="../../../diary/categories/Archery.html">アーチェリー</a>]
        [<a href="../../../diary/categories/Travel.html">旅行・散歩</a>]
    </span>
    <span class="blogEntryTitle">
    <a href="../../../diary/2006/02/09/1139454156000.html" name="a1139454156000" title="http://yusuke.homeip.net/diary/2006/02/09/1139454156000.html">Las Vegas へ Go!</a>
    </span>
    <br/>
    <span class="blogEntrySubtitle">
    </span>
  </div>
  <div class="blogEntryBody">
            <p><br/>ベガスシュート出場のため一路ラスベガスへ。<br/>空港まではいつもの<a href="http://www.bart.gov/">BART</a>で。<br/>もうBARTは慣れてるので何の問題もなく空港へ到着・・・するはずがなんかトラブルが発生したとかで途中で降ろされてしまった。<br/><br/><br/>降りろ、との車内のアナウンスが聞き取れたのは幸いだけども、駅構内のアナウンスはいまいち良く聞こえない。<br/>「空港行きは別のホームに到着しますよ」、とか言ってたらどうしよーとかやや不安になりながら係員に聞いてみたところ<br/>「テクニカルプロブレムが発生したのよ。もうそろそろ別のが来るので、同じホームで待っていればOk。」とのこと。<br/>余裕をもって出発したから良いものの、15〜20分くらい余分に時間かかってしまった。<br/>日本だったら5分も遅れたら結構な異常事態だけど、地元の方々は慣れたもので、とくにザワつくこともなく平気で待ってました。ビバっ 日本！<br/><br/>空港に着いてから飛行機に乗るのは特に問題もなくスムースに。<br/>相変わらずセキュリティチェックは厳しい。<br/><br/><a href="../../../diary/images/2006/02/9/view.jpg" rel="lightbox"></a><br/>飛行機からのキレイな眺め<br/></p><div class="tags">タグ : <a href="../../../diary/tags/vegas_shoot.html" rel="tag">vegas shoot</a>, <a href="../../../diary/tags/travel.html" rel="tag">travel</a>, <a href="../../../diary/tags/archery.html" rel="tag">archery</a></div>
  </div>
  <div class="blogEntryMetadata">
    <span class="floatRight">
        <a href="../../../diary/2006/02/09/1139454156000.html#trackbacks">トラックバック[0]</a>
        <a href="../../../diary/2006/02/09/1139454156000.html#comments">コメント[2]</a>
    </span>
    <form action="../../../diary/modifyBlogEntryDate.html" method="GET">
    投稿者 yusuke : 2006/02/09 12:02:36 JST
</form>
</div>
</div>
<div class="blogEntry approved">
  <div class="blogEntryHeader">
    <span class="blogEntryLinks">
      <a href="../../../diary/2006/02/09/1139424286419.html" title="http://yusuke.homeip.net/diary/2006/02/09/1139424286419.html">固定リンク</a> 
        [<a href="../../../diary/categories/Java.html">Java</a>]
    </span>
    <span class="blogEntryTitle">
    <a href="../../../diary/2006/02/09/1139424286419.html" name="a1139424286419" title="http://yusuke.homeip.net/diary/2006/02/09/1139424286419.html">A New Java Persistence API for Berkeley DB</a>
    </span>
    <br/>
    <span class="blogEntrySubtitle">
    </span>
  </div>
  <div class="blogEntryBody">
            <p><br/><a href="http://www.theserverside.com/news/thread.tss?thread_id=38916">TSSより</a><br/><br/>Perlの世界では馴染み深い（のだと思う）Berkley DBのJava版。<br/><a href="http://dev.sleepycat.com/je-persist-review/">http://dev.sleepycat.com/je-persist-review/</a><br/><br/>アプリケーション内蔵DBとしては近年は <a href="http://hsqldb.org/">hsqldb</a>が使われることが多いみたいだけど、ハナっからRDBMSとの連携を考えないライトウェイトな製品では有用かな。<br/></p><div class="tags">タグ : <a href="../../../diary/tags/java.html" rel="tag">java</a></div>
  </div>
  <div class="blogEntryMetadata">
    <span class="floatRight">
        <a href="../../../diary/2006/02/09/1139424286419.html#trackbacks">トラックバック[0]</a>
        <a href="../../../diary/2006/02/09/1139424286419.html#comments">コメント[0]</a>
    </span>
    <form action="../../../diary/modifyBlogEntryDate.html" method="GET">
    投稿者 yusuke : 2006/02/09 3:44:46 JST
</form>
</div>
</div>
</div>
<div class="footer">
  <span class="footerLinks">
    Powered by <a href="http://pebble.sourceforge.net/"><b>Pebble 1.9</b></a>
    [
        <a href="../../../diary/login.html">ログイン</a>
    ]
  </span>
  <span>
    Content (c) yusuke
  </span>
</div>
    </div>
<script src="../../../urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-262260-1";
urchinTracker();
</script>
  </body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <base href=".">
    <title>侍ズム - 2006/09/15</title>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://yusuke.homeip.net/diary/../../../diary/rss.xml"/>
    <link rel="alternate" type="application/rdf+xml" title="RDF" href="http://yusuke.homeip.net/diary/../../../diary/rdf.xml"/>
    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://yusuke.homeip.net/diary/../../../diary/atom.xml"/>
        <link rel="stylesheet" href="../../../diary/themes/custom/theme.css" type="text/css"/>
    <script src="../../../maps_file_api_v_1_key_ABQIAAAAtS2fi_RnBiuUs4BlVHjt6BRABsBgP8wqQh7kS3FgnXJL7vMCZhRCUVBp4cfEBxevDEQRKjj9DJC-Yg.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript" src="../../../diary/themes/custom/lightbox_plus.js"></script>
    <script type="text/javascript" src="../../../diary/pebble.js">
    </script>
  </head>
  <body>
    <div class="bodyContent">
<div class="header">
  <div class="search">
    <form method="post" action="../../../diary/search.html" accept-charset="UTF-8">
    <table cellpadding="4" cellspacing="0">
      <tr>
        <td align="right">
          <a href="../../../diary/today.html">今日</a> |
          <a href="../../../diary/rss.xml">RSS</a> |
          <a href="../../../diary/rdf.xml">RDF</a> |
          <a href="../../../diary/atom.xml">Atom</a> |
          <a href="../../../diary/viewFeeds.html">その他</a>
        </td>
      </tr>
      <tr>
        <td valign="top" align="right">
          <input type="text" name="query"/>&nbsp;<input type="submit" value="検索"/>
        </td>
      </tr>
      <tr>
        <td align="right" valign="top">
          <a href="../../../diary/search.html">詳細な検索</a>
        </td>
      </tr>
    </table>
    </form>
  </div>
  <div class="blogName">
    <a href="../../../diary.html">侍ズム</a>
  </div>
  <div class="blogDescription">
    Javaとアーチェリーと
  </div>
  <br/>
    <div id="categories">
    <a href="../../../diary/tags.html">タグ</a>
     - 
      カテゴリー :
          <span class="selectedCategory">All</span>
        |
            <span class="category"><a href="../../../diary/categories/Archery.html">アーチェリー</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Car.html">車</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Cooking.html">食べ物</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Game.html">ゲーム</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Java.html">Java</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Mac.html">Mac</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Misc.html">雑多</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Movie.html">映画</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Photo.html">写真</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Python.html">Python</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Server.html">自宅サーバ</a></span>
        |
            <span class="category"><a href="../../../diary/categories/Travel.html">旅行・散歩</a></span>
        |
            <span class="category"><a href="../../../diary/categories/gps.html">GPS</a></span>
  </div>
</div>
<div style="text-align: center"><br/>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//--></script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script>
</div>
<div class="sidebar">
  <!-- google_ad_section_start(weight=ignore) -->
<div>
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="_top">
<table border="0" bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="../../../logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<br/>
<input type="hidden" name="domains" value="yusuke.homeip.net"></input>
<input type="text" name="q" size="15" maxlength="255" value=""></input>
<input type="submit" name="sa" value="検索"></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value=""></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="yusuke.homeip.net" checked="checked"></input>
<font size="-1" color="#000000">yusuke.homeip.net</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-3583922429486444"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="UTF-8"></input>
<input type="hidden" name="oe" value="UTF-8"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1;"></input>
<input type="hidden" name="hl" value="ja"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
  <br/>
  <div>
    <b>最近のエントリー</b>
    <br/>
      <div class="small">
        <a href="/" title="http://yusuke.homeip.net/diary/2007/01/08/1168189347881.html">mylo レビュー - その3 外観フォトレビュー</a>
      </div>
      <div class="small">
        <a href="../../../diary/2007/01/08/1168188688771.html" title="http://yusuke.homeip.net/diary/2007/01/08/1168188688771.html">mylo レビュー - その2 ヘッドセットプラグは携帯平型コネクタ互換！？</a>
      </div>
      <div class="small">
        <a href="../../../diary/2007/01/08/1168187558769.html" title="http://yusuke.homeip.net/diary/2007/01/08/1168187558769.html">mylo レビュー - その1 付属品一覧</a>
      </div>
      <div class="small">
        <a href="../../../diary/2007/01/07/1168158908901.html" title="http://yusuke.homeip.net/diary/2007/01/07/1168158908901.html">七草がゆ</a>
      </div>
      <div class="small">
        <a href="/" title="http://yusuke.homeip.net/diary/2007/01/06/1168072232000.html">チーズフォンデュ</a>
      </div>
  </div>
<br/>
<br/>
  <div>
    <b>最近のレスポンス</b>
    <br/>
      <div class="small">
        <a href="../../../diary/2006/12/22/1166775131787.html#trackback1167157458589" title="http://yusuke.homeip.net/diary/2006/12/22/1166775131787.html#trackback1167157458589">「Parallels Desktop for Mac」のCoherenceモード</a>
        <br/>
        うぉ~　MacとWindowsがシームレ...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../diary/2006/12/24/1166958275778.html#comment1167061623654" title="http://yusuke.homeip.net/diary/2006/12/24/1166958275778.html#comment1167061623654">Re: PLAYSTATION 3 さらにゲット！</a>
        <br/>
        いえいえ。なにしろ儲け度外視の転売ですか...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../diary/2006/12/24/1166958275778.html#comment1167057348349" title="http://yusuke.homeip.net/diary/2006/12/24/1166958275778.html#comment1167057348349">Re: PLAYSTATION 3 さらにゲット！</a>
        <br/>
        大変ありがとうございました。
いやぁ、ずいぶんと気前の良い転売屋でした...
      </div>
  </div>
  <br/>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_text = "4169AA";
google_color_url = "4169AA";
//--></script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script>
</div>
<!-- google_ad_section_end -->
</div>
<div class="left">
  <div class="calendar"><table width="100%"><tr><td colspan="7" align="center"><b><a href="../../../diary/2006/09.html">9月 2006</a></b></td></tr><tr><td class="calendarDayHeader" width="14%">日</td><td class="calendarDayHeader" width="14%">月</td><td class="calendarDayHeader" width="14%">火</td><td class="calendarDayHeader" width="14%">水</td><td class="calendarDayHeader" width="14%">木</td><td class="calendarDayHeader" width="14%">金</td><td class="calendarDayHeader" width="14%">土</td></tr><tr><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;1&nbsp;</td><td class="calendarDay">&nbsp;2&nbsp;</td></tr><tr><td class="calendarDay">&nbsp;3&nbsp;</td><td class="calendarDay">&nbsp;4&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/05.html">5</a>&nbsp;</td><td class="calendarDay">&nbsp;6&nbsp;</td><td class="calendarDay">&nbsp;7&nbsp;</td><td class="calendarDay">&nbsp;8&nbsp;</td><td class="calendarDay">&nbsp;9&nbsp;</td></tr><tr><td class="calendarDay">&nbsp;10&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/11.html">11</a>&nbsp;</td><td class="calendarDay">&nbsp;12&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/13.html">13</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/14.html">14</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/15.html">15</a>&nbsp;</td><td class="calendarDay">&nbsp;16&nbsp;</td></tr><tr><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/17.html">17</a>&nbsp;</td><td class="calendarDay">&nbsp;18&nbsp;</td><td class="calendarDay">&nbsp;19&nbsp;</td><td class="calendarDay">&nbsp;20&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/21.html">21</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/22.html">22</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/23.html">23</a>&nbsp;</td></tr><tr><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/24.html">24</a>&nbsp;</td><td class="calendarDay">&nbsp;25&nbsp;</td><td class="calendarDay">&nbsp;26&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../diary/2006/09/27.html">27</a>&nbsp;</td><td class="calendarDay">&nbsp;28&nbsp;</td><td class="calendarDay">&nbsp;29&nbsp;</td><td class="calendarDay">&nbsp;30&nbsp;</td></tr><tr><td colspan="7" align="center"><a href="../../../diary/2006/08.html">8</a>&nbsp; | &nbsp;<a href="../../../diary/2007/01/13.html">今日</a>&nbsp; | &nbsp;<a href="../../../diary/2006/10.html">10</a></td></tr></table></div>
<br/>
<br/>
<!-- Google AdSense banner-->
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 120;
google_ad_height = 60;
google_ad_format = "120x60_as_rimg";
google_cpa_choice = "CAAQ_fnyiwIaCDqmJQ-S8AfXKNnH93M";
google_ad_channel = "";
//--></script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script>
<br/>
<br/>
<a href="http://www.beasys.co.jp/service/service/certified_prog.html"><img border="0" src="../../../diary/images/web.gif"/></a>
<br/>
<br/>
<a href="http://b.hatena.ne.jp/entrylist?url=http://yusuke.homeip.net/"><img src="http://b.hatena.ne.jp/bc/http://yusuke.homeip.net/" class="bcounter" alt="はてなブックマーク数" title="はてなブックマーク数"></a>
</div>
<div class="content">
<div class="blogEntry approved">
  <div class="blogEntryHeader">
    <span class="blogEntryLinks">
      <a href="../../../diary/2006/09/15/1158248446726.html" title="http://yusuke.homeip.net/diary/2006/09/15/1158248446726.html">固定リンク</a><br/>
        [<a href="../../../diary/categories/Server.html">自宅サーバ</a>]
        [<a href="../../../diary/categories/Java.html">Java</a>]
    </span>
    <span class="blogEntryTitle">
    <a href="../../../diary/2006/09/15/1158248446726.html" name="a1158248446726" title="http://yusuke.homeip.net/diary/2006/09/15/1158248446726.html">Pebble - コメントスパム対策 Round 2</a>
    </span>
    <br/>
    <span class="blogEntrySubtitle">
    </span>
  </div>
  <div class="blogEntryBody">
            <p>・<a href="../../../diary/2006/09/11/1157902460315.html">Pebble - コメントスパム対策</a><br/>・Pebble - コメントスパム対策 Round 2<br/>・<a href="../../../diary/2006/12/26/1167061479507.html">Pebble - トラックバックスパム対策</a><br/><br/>先日 <a href="../../../diary/2006/09/11/1157902460315.html">JavaScript の埋め込み</a>でロボットのスパムコメント対策をしました。<br/>毎日60〜100件のスパムコメントがあったのが、大幅に減りましたがその後も多いと日に10件程度の投稿があります。<br/>コメントをくださっているのは以下の６人の方々。<br/>Jeff : simpsons@yahoo.com <br/>Andreos : support@greenworld.com <br/>Pharmacy : john1980@hotmail.com <br/>Andreos : support@greenworld.com <br/>Online : lover87@mail.ru <br/>Loan : gorodok@hotmail.com <br/><br/>考えられる理由は３つくらいあります。<br/>1. スパム業者が対策を施した<br/>非常にシンプルな防止策なので、JavaScript は解釈しなくても正しい POST 先さえ人間がロボットに教えてあげれば投稿できます。<br/>しかし費用対効果を考えるとウチのサイトごときに特化した対策をいちいち施すことは考えにくいです。<br/><br/>2. JavaScript を解釈するロボットがいる<br/>技術上無理な話じゃないですが、本格的なCAPCHAにはかなわないでしょう。<br/>そこまで凝ったロボットをいちいちスパム業者が作るとは考えにくいです。<br/>何しろ非常に安いコストで宣伝することが目的ですから。<br/><br/>3. POST 先の URI をキャッシュしている<br/>毎回 HTML をクロールしてコメント投稿の URI をパースするのはスパム投稿のスループット上効率が悪いです。<br/>単位時間あたりのスパム投稿数をあげるには前回スパム投稿が成功した URI をキャッシュしておく実装が考えられます。<br/><br/><br/>というわけで、現実的には 3. が正解ではないかと思います。<br/>なのでコメントの投稿先の URI を変えてまた様子を見ることにします。<br/>目指すはコメント投稿をする人間に負担を掛けないスパム対策！<br/>#とはいえ人間からのコメントはあんまないんですが・・・。ﾄﾎﾎ<br/><br/>で、Pebble ではコメント投稿に使うパスは classes/action.properties で指定されているので以下のようにテキトウに書き換えて、対応する JSP(common/jsp/commentForm.jspf) も修正して再デプロイすれば Ok です。<br/>&lt; 11: addComment=pebble.controller.action.AddCommentAction<br/>&gt; 11: noSpamAddComment=pebble.controller.action.AddCommentAction<br/><br/>これでもダメなら JavaScript を解釈するロボットがいる可能性が高いでしょう。<br/>それはそれで対策を考えてありますが・・・。<br/>スパム業者との知恵比べのようでなんだか楽しくなってきました。<br/><br/>追記 12/26:<br/>この対策以降コメントスパムは来なくなりました。<br/></p><div class="tags">タグ : <a href="../../../diary/tags/pebble.html" rel="tag">pebble</a>, <a href="../../../diary/tags/java.html" rel="tag">java</a></div>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_text = "4169AA";
google_color_url = "4169AA";
//--></script>
<script type="text/javascript" src="../../../pagead/show_ads.js">
</script>         
  </div>
  <div class="blogEntryMetadata">
    <span class="floatRight">
        <a href="../../../diary/2006/09/15/1158248446726.html#trackbacks">トラックバック[0]</a>
        <a href="../../../diary/2006/09/15/1158248446726.html#comments">コメント[2]</a>
    </span>
    <form action="../../../diary/modifyBlogEntryDate.html" method="GET">
    投稿者 yusuke : 2006/09/15 0:40:46 JST
</form>
</div>
</div>
</div>
<div class="footer">
  <span class="footerLinks">
    Powered by <a href="http://pebble.sourceforge.net/"><b>Pebble 1.9</b></a>
    [
        <a href="../../../diary/login.html">ログイン</a>
    ]
  </span>
  <span>
    Content (c) yusuke
  </span>
</div>
    </div>
<script src="../../../urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-262260-1";
urchinTracker();
</script>
  </body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <base href=".">
    <title>侍ズム - Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</title>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://yusuke.homeip.net/diary/../../../../diary/rss.xml"/>
    <link rel="alternate" type="application/rdf+xml" title="RDF" href="http://yusuke.homeip.net/diary/../../../../diary/rdf.xml"/>
    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://yusuke.homeip.net/diary/../../../../diary/atom.xml"/>
        <link rel="stylesheet" href="../../../../diary/themes/custom/theme.css" type="text/css"/>
    <script src="../../../../maps_file_api_v_1_key_ABQIAAAAtS2fi_RnBiuUs4BlVHjt6BRABsBgP8wqQh7kS3FgnXJL7vMCZhRCUVBp4cfEBxevDEQRKjj9DJC-Yg.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript" src="../../../../diary/themes/custom/lightbox_plus.js"></script>
    <script type="text/javascript" src="../../../../diary/pebble.js">
    </script>
  </head>
  <body>
    <div class="bodyContent">
<div class="header">
  <div class="search">
    <form method="post" action="../../../../diary/search.html" accept-charset="UTF-8">
    <table cellpadding="4" cellspacing="0">
      <tr>
        <td align="right">
          <a href="../../../../diary/today.html">今日</a> |
          <a href="../../../../diary/rss.xml">RSS</a> |
          <a href="../../../../diary/rdf.xml">RDF</a> |
          <a href="../../../../diary/atom.xml">Atom</a> |
          <a href="../../../../diary/viewFeeds.html">その他</a>
        </td>
      </tr>
      <tr>
        <td valign="top" align="right">
          <input type="text" name="query"/>&nbsp;<input type="submit" value="検索"/>
        </td>
      </tr>
      <tr>
        <td align="right" valign="top">
          <a href="../../../../diary/search.html">詳細な検索</a>
        </td>
      </tr>
    </table>
    </form>
  </div>
  <div class="blogName">
    <a href="../../../../diary.html">侍ズム</a>
  </div>
  <div class="blogDescription">
    Javaとアーチェリーと
  </div>
  <br/>
    <div id="categories">
    <a href="../../../../diary/tags.html">タグ</a>
     - 
      カテゴリー :
          <span class="selectedCategory">All</span>
        |
            <span class="category"><a href="../../../../diary/categories/Archery.html">アーチェリー</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Car.html">車</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Cooking.html">食べ物</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Game.html">ゲーム</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Java.html">Java</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Mac.html">Mac</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Misc.html">雑多</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Movie.html">映画</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Photo.html">写真</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Python.html">Python</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Server.html">自宅サーバ</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/Travel.html">旅行・散歩</a></span>
        |
            <span class="category"><a href="../../../../diary/categories/gps.html">GPS</a></span>
  </div>
</div>
<div style="text-align: center"><br/>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_alternate_color = "FFFFFF";
google_ad_width = 728;
google_ad_height = 15;
google_ad_format = "728x15_0ads_al";
google_ad_channel = "";
//--></script>
<script type="text/javascript" src="../../../../pagead/show_ads.js">
</script>
</div>
<div class="sidebar">
  <!-- google_ad_section_start(weight=ignore) -->
<div>
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="_top">
<table border="0" bgcolor="#ffffff">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="../../../../logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<br/>
<input type="hidden" name="domains" value="yusuke.homeip.net"></input>
<input type="text" name="q" size="15" maxlength="255" value=""></input>
<input type="submit" name="sa" value="検索"></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value=""></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="yusuke.homeip.net" checked="checked"></input>
<font size="-1" color="#000000">yusuke.homeip.net</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-3583922429486444"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="UTF-8"></input>
<input type="hidden" name="oe" value="UTF-8"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1;"></input>
<input type="hidden" name="hl" value="ja"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
  <br/>
  <div>
    <b>最近のエントリー</b>
    <br/>
      <div class="small">
        <a href="../../../../diary/2007/02/28/1172625643735.html" title="http://yusuke.homeip.net/diary/2007/02/28/1172625643735.html">WebLogic Server で Spring 2.0 サポート</a>
      </div>
      <div class="small">
        <a href="../../../../diary/2007/02/28/1172625302386.html" title="http://yusuke.homeip.net/diary/2007/02/28/1172625302386.html">Parallels Desktop for Mac Build 3186 リリース</a>
      </div>
      <div class="small">
        <a href="../../../../diary/2007/02/23/1172160125763.html" title="http://yusuke.homeip.net/diary/2007/02/23/1172160125763.html">JBuilder 2007 リリース</a>
      </div>
      <div class="small">
        <a href="../../../../diary/2007/02/22/1172133137075.html" title="http://yusuke.homeip.net/diary/2007/02/22/1172133137075.html">BEA WebLogic Integration 9.2J / AquaLogic Commerce Services 発表</a>
      </div>
      <div class="small">
        <a href="../../../../diary/2007/02/21/1171986036930.html" title="http://yusuke.homeip.net/diary/2007/02/21/1171986036930.html">AdMomentum - ファストの新しい広告プラットフォーム</a>
      </div>
      <div class="small">
        <a href="../../../../diary/2007/02/20/1171933633545.html" title="http://yusuke.homeip.net/diary/2007/02/20/1171933633545.html">TextWrangler 2.2.1 リリース</a>
      </div>
      <div class="small">
        <a href="../../../../diary/2007/02/19/1171866892460.html" title="http://yusuke.homeip.net/diary/2007/02/19/1171866892460.html">Parallels Desktop for Mac Release Candidate 3 (Build 3170)</a>
      </div>
  </div>
<br/>
<br/>
  <div>
    <b>最近のレスポンス</b>
    <br/>
      <div class="small">
        <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172584868687" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172584868687">Re: Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</a>
        <br/>
        なるほど。Tomcat4.x だとうまくいきませんか・・。
最新版の JavaService とか使ってみてはいかがでしょう！？
http://javaservice.o...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../../diary/2007/02/22/1172133137075.html#comment1172584460123" title="http://yusuke.homeip.net/diary/2007/02/22/1172133137075.html#comment1172584460123">Re: BEA WebLogic Integration 9.2J / AquaLogic Commerce Services 発表</a>
        <br/>
        いやー製品増えて大変ですねー。一体誰がサ...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../../diary/2007/02/22/1172133137075.html#comment1172584121111" title="http://yusuke.homeip.net/diary/2007/02/22/1172133137075.html#comment1172584121111">Re: BEA WebLogic Integration 9.2J / AquaLogic Commerce Services 発表</a>
        <br/>
        な、なにーー！そいつは知らなかった！ぼく...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172562903175" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172562903175">Re: Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</a>
        <br/>
        返信ありがとうございます。
はい、Tomcat5.*系では問題無く出...
        <br/><br/>
      </div>
      <div class="small">
        <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172487683512" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172487683512">Re: Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</a>
        <br/>
        どう権限が足りないのか、メッセージからは...
      </div>
  </div>
  <br/>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_alternate_ad_url = "../../../../160x600.html";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "4188DD";
google_color_text = "4169AA";
google_color_url = "4169AA";
//--></script>
<script type="text/javascript" src="../../../../pagead/show_ads.js">
</script>
</div>
<!-- google_ad_section_end -->
</div>
<div class="left">
  <div class="calendar"><table width="100%"><tr><td colspan="7" align="center"><b><a href="../../../../diary/2006/09.html">9月 2006</a></b></td></tr><tr><td class="calendarDayHeader" width="14%">日</td><td class="calendarDayHeader" width="14%">月</td><td class="calendarDayHeader" width="14%">火</td><td class="calendarDayHeader" width="14%">水</td><td class="calendarDayHeader" width="14%">木</td><td class="calendarDayHeader" width="14%">金</td><td class="calendarDayHeader" width="14%">土</td></tr><tr><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;</td><td class="calendarDay">&nbsp;1&nbsp;</td><td class="calendarDay">&nbsp;2&nbsp;</td></tr><tr><td class="calendarDay">&nbsp;3&nbsp;</td><td class="calendarDay">&nbsp;4&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/05.html">5</a>&nbsp;</td><td class="calendarDay">&nbsp;6&nbsp;</td><td class="calendarDay">&nbsp;7&nbsp;</td><td class="calendarDay">&nbsp;8&nbsp;</td><td class="calendarDay">&nbsp;9&nbsp;</td></tr><tr><td class="calendarDay">&nbsp;10&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/11.html">11</a>&nbsp;</td><td class="calendarDay">&nbsp;12&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/13.html">13</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/14.html">14</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/15.html">15</a>&nbsp;</td><td class="calendarDay">&nbsp;16&nbsp;</td></tr><tr><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/17.html">17</a>&nbsp;</td><td class="calendarDay">&nbsp;18&nbsp;</td><td class="calendarDay">&nbsp;19&nbsp;</td><td class="calendarDay">&nbsp;20&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/21.html">21</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/22.html">22</a>&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/23.html">23</a>&nbsp;</td></tr><tr><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/24.html">24</a>&nbsp;</td><td class="calendarDay">&nbsp;25&nbsp;</td><td class="calendarDay">&nbsp;26&nbsp;</td><td class="calendarDayWithEntries">&nbsp;<a href="../../../../diary/2006/09/27.html">27</a>&nbsp;</td><td class="calendarDay">&nbsp;28&nbsp;</td><td class="calendarDay">&nbsp;29&nbsp;</td><td class="calendarDay">&nbsp;30&nbsp;</td></tr><tr><td colspan="7" align="center"><a href="../../../../diary/2006/08.html">8</a>&nbsp; | &nbsp;<a href="../../../../diary/2007/03/02.html">今日</a>&nbsp; | &nbsp;<a href="../../../../diary/2006/10.html">10</a></td></tr></table></div>
<br/>
<br/>
<!-- Google AdSense banner-->
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 120;
google_ad_height = 60;
google_ad_format = "120x60_as_rimg";
google_cpa_choice = "CAAQ_fnyiwIaCDqmJQ-S8AfXKNnH93M";
google_ad_channel = "";
//--></script>
<script type="text/javascript" src="../../../../pagead/show_ads.js">
</script>
<br/>
<br/>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_ad_width = 120;
google_ad_height = 60;
google_ad_format = "120x60_as_rimg";
google_cpa_choice = "CAAQiOjrhwIaCGrJ7Mu23ptbKNjQ6n4";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript" src="../../../../pagead/show_ads.js">
</script>
<br/>
<br/>
<a href="http://www.beasys.co.jp/service/service/certified_prog.html"><img border="0" src="../../../../diary/images/web.gif"/></a>
<br/>
<br/>
<a href="http://b.hatena.ne.jp/entrylist?url=http://yusuke.homeip.net/"><img src="http://b.hatena.ne.jp/bc/http://yusuke.homeip.net/" class="bcounter" alt="はてなブックマーク数" title="はてなブックマーク数"></a>
<br/>
<br/>
<a href="http://www.pressblog.jp/common_link.aspx?af=4000&amp;action=index&amp;pbid=QIdAbqp1of4%3d"><img src="../../../../watch/pbtag_aspx_pbid_QIdAbqp1of4_.jpg" border="0"></a></div>
<div class="content">
<div class="linearNavigationLinks">
    &lt;&lt; <a href="../../../../diary/2006/09/24/1159030365101.html">Java - スレッドダンプの取り方 その2 / Linux だと java プロセスがいっぱい！？</a> |
  <a href="../../../../diary.html">Home</a>
    | <a href="../../../../diary/2006/09/27/1159367275705.html">Python 修行 - 4 / アンチョコ探し</a> &gt;&gt;
</div>
<div class="blogEntry approved">
  <div class="blogEntryHeader">
    <span class="blogEntryLinks">
      <a href="../../../../diary/2006/09/24/1159032652540.html" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html">固定リンク</a><br/>
        [<a href="../../../../diary/categories/Java.html">Java</a>]
    </span>
    <span class="blogEntryTitle">
    <a href="../../../../diary/2006/09/24/1159032652540.html" name="a1159032652540" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html">Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</a>
    </span>
    <br/>
    <span class="blogEntrySubtitle">
    </span>
  </div>
  <div class="blogEntryBody">
        <p>・<a href="../../../../diary/2006/09/21/1158846052527.html">その1 / スレッドダンプの取り方</a><br/>・<a href="../../../../diary/2006/09/24/1159030365101.html">その2 / Linux だと java プロセスがいっぱい！？ </a><br/>→その3 / Windows サービスとして登録している場合は？<br/>・<a href="../../../../diary/2006/10/04/1159972893869.html">その4 / WebLogic Server とスレッドダンプ</a><br/><br/>Windows 環境で、サーバサイドのプログラムは Windows サービスとして登録して運用することが多いです。<br/><br/>例えば Tomcat 5.5 であれば<br/><span class="codeSample">%TOMCAT_HOME%¥bin¥service.bat install [サービス名]</span><br/>でサービス登録、<br/><span class="codeSample">&gt; net start [サービス名]</span><br/>で起動できます。(もちろんサービスコントロールパネルでもOk)<br/><br/><a href="#"></a><br/>Tomcat5.5 が Widnows サービスとして起動した様子<br/><br/>しかし、このコマンドプロンプトは Tomcat のプロセスに直接絡んでいないため、Ctrl+Break は効きません。<br/>そんなときに便利なのが <a href="http://www.latenighthacking.com/projects/2003/sendSignal/">SendSignal</a> です。<br/>これは指定したプロセスに Ctrl+Break を押下したのと同じ信号を送る、まさにスレッドダンプを取るために作られたプログラムです。<br/>使い方は簡単、<br/><span class="codeSample">&gt; SendSignal [プロセスID]</span><br/>とするだけ。<br/><br/>プロセスID は Windows のタスクマネージャで確認できます。<br/>ただし、デフォルトではプロセスIDは表示されないため、[表示&gt;列の選択]より[PID(プロセスID)]を選択しておく必要があります。<br/>Tomcat をサービスとして起動している場合は java.exe ではなくtomcat5.exe として表示されます。<br/>この↓例だと 1204 が Tomcat のプロセスID になります。<br/><a href="#"></a><br/>tomcat5.exe のプロセスID を確認中<br/><br/>プロセスID が確認できたら後は SendSignal の出番です。<br/><span class="codeSample">&gt; SendSignal.exe 1204</span> で Ok。<br/><br/>tomcat5.exe の出力は %TOMCAT_HOME%¥logs¥jakarta_service_yyyymmdd.log に記録され、スレッドダンプもここに出ます。<br/>余談ですがこのファイルは改行コードが CRLF になっていないみたいで、メモ帳で開くとTSV形式(Tofu Separated Value - 豆腐区切り)の長い一行に見えてしまいます。<br/>少し洒落たエディタとか<a href="../../../../samurai.html">侍</a>とかで開きましょう。<br/>さらに余談ですが標準出力・標準エラー出力は stderr|out_yyyymmdd.log というファイルに記録されています。これは(たぶん) Tomcat がアプリケーションレベルで補足して出力しているもので、JVM のもっと低レベルなところで出力されるスレッドダンプは記録されないことに注意してください。<br/><br/><br/><a href="#"></a><br/><a href="http://www.latenighthacking.com/projects/2003/sendSignal/">SendSignal</a> でスレッドダンプが出力された様子<br/><br/><a href="http://www.latenighthacking.com/projects/2003/sendSignal/">SendSignal</a> はスレッドダンプを取得するためだけに Windows サービス化をためらっていた人には非常にカユい所に手がとどく便利ツールなのですが、別のカユい制限があります。<br/>バッチの中で呼び出すと "バッチ ジョブを終了しますか (Y/N)?" とバッチが停止してしまうのです。<br/>どうやら Ctrl+Break の信号を自身も感知してしまう(？)ようで・・・。<br/>一応回避策はあって、"start" を介して別のコマンドプロンプトをキックすれば大丈夫です。こんな↓感じで。<br/>-send.bat<br/><pre class="codeSample">echo スレッドダンプを取得します。<br/>start SendSignal [pid]<br/>echo スレッドダンプを取得しました。</pre><br/><br/>スレッドダンプの取得にはもう一つお勧めのツールがあります。<br/>その名もズバリ、<a href="http://www.adaptj.com/root/main/stacktrace">StackTrace</a>。StackTrace とは各スレッドのメソッド呼び出し順のことです。NullPointerException とか発生したときにずらずらっと表示されるアレ。<br/>Java Web Start としてパッケージされているので、JDK がインストールされている環境ならば起動は簡単、<a href="http://tmitevski.users.mcs2.netarray.com/trace_demo/index.html">起動用のリンク</a>をクリックするだけです。<br/>よく使う場合は<a href="../../../../diary/2006/09/22/1158883243000.html">ショートカットをデスクトップに配置する</a>こともできます。<br/>使い方は簡単。起動したらメニューより [Process&gt;Thread Dump...] を選んでプロセスID を入力するだけ。プロセスID がまだわかっていなければ一覧から選択することもできます。<br/><a href="http://www.adaptj.com/root/main/stacktrace">StackTrace</a> が賢いのはスレッドダンプがプロセスの向こう側に吐かれるのではなく、<a href="http://www.adaptj.com/root/main/stacktrace">StackTrace</a> のアプリケーション内で直接スレッドダンプを確認できることです。<br/><br/><a href="#"></a><br/><a href="http://www.adaptj.com/root/main/stacktrace">StackTrace</a> でスレッドダンプを取得している様子<br/><br/>ただ、かなりトリッキーな事をしているようで、スレッドダンプを取得する際、解析対象 JVM 内に勝手に "StackTrace Remote Thread" という名前のスレッドを作ってしまいます。<br/>ちょっと使ってみた限り不安定になるようなことはありませんでしたが、どの程度の実績がある製品なのかは知りません。<br/>動作中の JVM に影響を与えずに中身を確認できるのがスレッドダンプの良いところですので、やや気持ちが悪いといえば気持ちが悪いです。<br/>冗長化していない環境では念のため、運用前に十分に検証しておきましょう。<br/><br/>ちなみに <a href="http://www.adaptj.com/root/main/stacktrace">StackTrace</a> は一部ネイティブライブラリを使っており、Pure Java のプログラムではありません。Mac OS X、Linux、Windows にのみ対応しています。<br/><br/>次回は <a href="http://www.beasys.co.jp/e-docs/index.html">WebLogic Server</a> を利用している環境でのスレッドダンプの取り方について説明します。<br/></p><div class="tags">タグ : <a href="../../../../diary/tags/java.html" rel="tag">java</a></div>
<script type="text/javascript"><!--
google_ad_client = "pub-3583922429486444";
google_alternate_ad_url = "../../../../728x90.html";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "FFFFFF";
google_color_bg = "FFFFFF";
google_color_link = "4188DD";
google_color_text = "4169AA";
google_color_url = "4169AA";
//--></script>
<script type="text/javascript" src="../../../../pagead/show_ads.js">
</script>
  </div>
  <div class="blogEntryMetadata">
    <span class="floatRight">
        <a href="../../../../diary/2006/09/24/1159032652540.html#trackbacks">トラックバック[1]</a>
        <a href="../../../../diary/2006/09/24/1159032652540.html#comments">コメント[4]</a>
    </span>
    <form action="../../../../diary/modifyBlogEntryDate.html" method="GET">
    投稿者 yusuke : 2006/09/24 2:30:52 JST
</form>
</div>
    <br/>
    <a name="comments"></a>
          <div class="itemBodyOdd" style="padding-left: 16px; padding-top: 16px; padding-bottom: 16px; padding-right: 16px">
<div class="comment approved">
  <div class="commentHeader">
    <span class="commentLinks">
      <a href="/#form">返信</a> |
      <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172485242862" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172485242862">固定リンク</a>
    </span>
    <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172485242862" name="comment1172485242862" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172485242862">Re: Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</a>
  </div>
  <div class="commentBody">
    プロセスを落とそうとすると下記のメッセージがでます。
Access denied; retrying with increased privileges.
権限ってなにを変更すればよいのですかね？？(
  </div>
  <div class="commentMetadata">
    投稿者 Anonymous : 2007/02/26 19:20:42 JST
  </div>
</div>
          </div>
          <div class="itemBodyEven" style="padding-left: 32px; padding-top: 16px; padding-bottom: 16px; padding-right: 16px">
<div class="comment approved">
  <div class="commentHeader">
    <span class="commentLinks">
      <a href="/#form">返信</a> |
      <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172487683512" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172487683512">固定リンク</a>
    </span>
    <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172487683512" name="comment1172487683512" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172487683512">Re: Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</a>
  </div>
  <div class="commentBody">
    どう権限が足りないのか、メッセージからはよくわかりませんが、うまいことやってくれているはずです。
私も同じメッセージを見ましたが、うまく取れていました。
ちゃんとスレッドダンプとれているのではないでしょうか？
  </div>
  <div class="commentMetadata">
    投稿者 Yusuke : 2007/02/26 20:01:23 JST
  </div>
</div>
          </div>
          <div class="itemBodyOdd" style="padding-left: 48px; padding-top: 16px; padding-bottom: 16px; padding-right: 16px">
<div class="comment approved">
  <div class="commentHeader">
    <span class="commentLinks">
      <a href="/#form">返信</a> |
      <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172562903175" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172562903175">固定リンク</a>
    </span>
    <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172562903175" name="comment1172562903175" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172562903175">Re: Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</a>
  </div>
  <div class="commentBody">
    返信ありがとうございます。
はい、Tomcat5.*系では問題無く出力されました。
ただ、Tomcat4.*系では今のところログが確認されません。Tomcat4.*系では使用することが出来ないのですかね？
  </div>
  <div class="commentMetadata">
    投稿者 Anonymous : 2007/02/27 16:55:03 JST
  </div>
</div>
          </div>
          <div class="itemBodyEven" style="padding-left: 64px; padding-top: 16px; padding-bottom: 16px; padding-right: 16px">
<div class="comment approved">
  <div class="commentHeader">
    <span class="commentLinks">
      <a href="/#form">返信</a> |
      <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172584868687" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172584868687">固定リンク</a>
    </span>
    <a href="../../../../diary/2006/09/24/1159032652540.html#comment1172584868687" name="comment1172584868687" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#comment1172584868687">Re: Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？</a>
  </div>
  <div class="commentBody">
    なるほど。Tomcat4.x だとうまくいきませんか・・。
最新版の JavaService とか使ってみてはいかがでしょう！？
http://javaservice.objectweb.org/
  </div>
  <div class="commentMetadata">
    投稿者 Yusuke : 2007/02/27 23:01:08 JST
  </div>
</div>
          </div>
    <a name="trackbacks"></a>
          <div class="itemBodyOdd" style="padding: 16px">
<div class="trackback approved">
  <div>
    <span class="trackbackLinks">
      <a href="../../../../diary/2006/09/24/1159032652540.html#trackback1159199228752" title="http://yusuke.homeip.net/diary/2006/09/24/1159032652540.html#trackback1159199228752">固定リンク</a>
    </span>
    <span class="trackbackHeader">
    <a href="http://plaza.rakuten.co.jp/quitada/diary/200605280001/" name="trackback1159199228752" title="http://plaza.rakuten.co.jp/quitada/diary/200605280001/" rel="nofollow">Windowsでjavaスレッドダンプ取得-原点回帰編</a>
    </span>
  </div>
  <div class="trackbackBody">
    検討編で、Windowsにてコマンドプロンプトがでていない状態でスレッドダンプを取得する方法を色々と検討しましたが、どれも一長一短があることが露呈してしまったわけです。もっとジェネラルな方法はないでしょうか。ということで、原点に立ち返って検討してみます。そも...
    <br/><br/>
    <a href="http://plaza.rakuten.co.jp/quitada/diary/200605280001/">続きを読む...</a>
  </div>
  <div class="trackbackMetadata">
    投稿者 めざせ！金持ち父さん : 2006/09/26 0:47:08 JST
  </div>
</div>
        </div>
      <br/>
      <br/>
      <div class="blogEntryBody"><a name="form"></a>
<div>
<b>コメント追加</b>
<br/><br/>
<form name="addComment" action="/#form" method="POST" accept-charset="UTF-8">
<input type="hidden" name="entry" value="1159032652540">
<input type="hidden" name="parent" value="">
<table width="99%">
  <tr>
    <td valign="top"><b>タイトル</b></td>
    <td><input type="text" name="title" size="40" value="Re: Java - スレッドダンプの取り方 その3 / Windows サービスとして登録している場合は？"/></td>
  </tr>
  <tr>
    <td valign="top"><b>本文</b></td>
    <td>
      <textarea name="body" rows="8" cols="40"></textarea>
      <div class="small"><b>HTML</b> : b, i, blockquote, br, p, pre, a href="", ul, ol, li</div>
    </td>
  </tr>
  <tr>
    <td valign="top"><b>名前</b></td>
    <td><input type="text" name="author" size="40" value="Anonymous"></td>
  </tr>
  <tr>
    <td valign="top"><b>E-mail</b></td>
    <td>
      <input type="text" name="email" size="40" value="">
    </td>
  </tr>
  <tr>
    <td valign="top"><b>Webサイト</b></td>
    <td><input type="text" name="website" size="40" value=""></td>
  </tr>
  <tr>
    <td valign="top"><b>保存しますか?</b></td>
    <td>
      はい&nbsp;
      <input type="radio" name="rememberMe" value="true"/>
      いいえ&nbsp;<input type="radio" name="rememberMe" value="false" checked="checked"/>
    </td>
  </tr>
  <tr>
    <td colspan="2">
      <p>
      <b>E-mailは公開されません</b>, このエントリーの新規コメント通知が必要なら記入します。(解除可能)
      </p>
    </td>
  </tr>
  <tr>
    <td colspan="2" align="right">
      <input name="submit" type="submit" onclick="this.form.action='noSpamAddComment.action#form'" value="プレビュー"/>
      <input name="submit" type="submit" onclick="this.form.action='noSpamAddComment.action#form'" value="コメント投稿"/>
      <noscript>JavaScript を有効にしていないブラウザでは投稿出来ません。</noscript>
    </td>
  </tr>
</table>
</form>
</div>
</div>
      <div class="small" style="text-align: center">トラックバックURL http://yusuke.homeip.net/diary/<script>document.write('noSpamAddTrackBack');</script>.action?entry=1159032652540</div>
      <br/>
</div>
</div>
<div class="footer">
  <span class="footerLinks">
    Powered by <a href="http://pebble.sourceforge.net/"><b>Pebble 1.9</b></a>
    [
        <a href="../../../../diary/login.html">ログイン</a>
    ]
  </span>
  <span>
    Content (c) yusuke
  </span>
</div>
    </div>
<script src="../../../../urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-262260-1";
urchinTracker();
</script>
  </body>
</html>